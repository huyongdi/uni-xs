(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/bookshelf/read"],{"039f":function(t,o,e){"use strict";(function(t){e("5a21");i(e("66fd"));var o=i(e("ec73"));function i(t){return t&&t.__esModule?t:{default:t}}t(o.default)}).call(this,e("543d")["createPage"])},2414:function(t,o,e){"use strict";var i,a=function(){var t=this,o=t.$createElement;t._self._c;t._isMounted||(t.e0=function(o){t.asideShow=!1})},n=[];e.d(o,"b",(function(){return a})),e.d(o,"c",(function(){return n})),e.d(o,"a",(function(){return i}))},"4eaa":function(t,o,e){"use strict";e.r(o);var i=e("d499"),a=e.n(i);for(var n in i)"default"!==n&&function(t){e.d(o,t,(function(){return i[t]}))}(n);o["default"]=a.a},7897:function(t,o,e){},bc10:function(t,o,e){"use strict";var i=e("7897"),a=e.n(i);a.a},d499:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=a(e("a806"));function a(t){return t&&t.__esModule?t:{default:t}}var n={data:function(){return{pageTotal:0,pageCurrent:0,translateX:0,startPoint:0,move:0,animationSeconds:.3,fontSize:1,clearance:16,optShow:!1,asideShow:!1,optBotShow:!1,optSetShow:!1,order:"倒序",listData:[],fontSizeSlider:2,skinData:[],skinValue:"default",layoutData:[],layoutValue:"H",domInfo:{},coverShow:!0,BookData:{},coverInfo:{startPoint:0,move:0,translate:0},ReadContent:"",BookList:[],BookInfo:{},addBtn:!0}},onLoad:function(){t.setNavigationBarTitle({title:"第一章"}),t.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#c4b395"}),this.skinData=[{key:"default",checked:!0},{key:"blue",checked:!1},{key:"green",checked:!1},{key:"light",checked:!1},{key:"night",checked:!1}],this.layoutData=[{key:"H",name:"左右滑动",checked:!0},{key:"V",name:"上下滑动",checked:!1}];try{var o=t.getStorageSync("BookReadData");this.BookData=o,this.iniGetBookInfo()}catch(e){t.showToast({title:"数据异常",icon:"none"})}},onReady:function(){},onPullDownRefresh:function(){"V"==this.layoutValue&&(this.BookData.index<=1?(this.coverShow=!0,this.coverInfo.translate=0):(this.BookData.index--,this.getNewReadContent())),t.stopPullDownRefresh()},onReachBottom:function(){"V"==this.layoutValue&&this.nexReadClick()},methods:{iniGetBookInfo:function(){var o=this;t.setNavigationBarTitle({title:this.BookData.name}),(this.BookData.index>1||this.BookData.page>1)&&(this.coverShow=!1),i.default.GetBookListID(this.BookData.id).then((function(t){o.addBtn=t})),this.GetBookDetails(this.BookData.id),this.GetReadContent()},GetBookDetails:function(t){var o=this;this.zaiApi({url:"dingdian/"+t}).then((function(t){o.GetDetailsData(t)}))},GetDetailsData:function(t){var o=this;i.default.DetailsData(t).then((function(t){o.BookInfo=t.data,o.BookList=t.list}))},GetReadContent:function(){var t=this;this.zaiApi({url:"dingdian/"+this.BookData.id+"/"+this.BookData.news+".html"}).then((function(o){t.GetReadData(o)}))},GetReadData:function(o){var e=this;i.default.GetReadContentData(o).then((function(o){e.ReadContent=o,"H"==e.layoutValue?setTimeout((function(){e.GetDomWidthValue()}),400):"V"==e.layoutValue&&t.pageScrollTo({scrollTop:0,duration:300})}))},GetDomWidthValue:function(){var t=this;this.SetDomWidthValue().then((function(o){console.log("操你妈，劳资取到了："+JSON.stringify(o)),t.domInfo=o,t.calculateTotalPage(),t.SetReadPage()}))},SetReadPage:function(){this.pageCurrent=this.BookData.page,this.calculateTranslateX()},AddClick:function(){var t=this;i.default.AddBookListData(this.BookData).then((function(o){t.addBtn=!0}))},SetDomWidthValue:function(){var t=this.$mp.page.$getAppWebview();return new Promise((function(o){t.evalJS('\n\t\t\t\t\tvar scrollWidth = document.getElementById(\'readerBook\').scrollWidth;\n\t\t\t\t\tvar offsetWidth = document.getElementById(\'readerBook\').offsetWidth;\n\t\t\t\t\tconsole.log(scrollWidth,offsetWidth);\n\t\t\t\t\tplus.storage.setItem("scrollWidth",scrollWidth + "");\n\t\t\t\t\tplus.storage.setItem("offsetWidth",offsetWidth + "");\n\t\t\t\t'),setTimeout((function(){var t=plus.storage.getItem("scrollWidth"),e=plus.storage.getItem("offsetWidth");o({scrollWidth:Number(t),offsetWidth:Number(e)})}),400)}))},coverStart:function(t){this.coverInfo.startPoint=t.touches[0].clientX},coverEnd:function(t){var o=t.changedTouches[0].clientX,e=this.coverInfo.startPoint,i=e-o;i>10?this.calculateCoverTranslate("left"):i<-10&&this.calculateCoverTranslate("right"),this.coverInfo.move=0},coverMove:function(t){this.coverInfo.move=t.changedTouches[0].clientX-this.coverInfo.startPoint},coverClick:function(){this.calculateCoverTranslate("click")},calculateCoverTranslate:function(t){var o=this;"left"==t||"click"==t?this.coverInfo.translate=-(this.domInfo.offsetWidth+this.clearance):"right"==t&&(this.coverInfo.translate=this.domInfo.offsetWidth+this.clearance),setTimeout((function(){o.coverShow=!1}),300)},touchStart:function(t){"H"==this.layoutValue&&(this.startPoint=t.touches[0].clientX)},touchEnd:function(t){if("H"==this.layoutValue){var o=t.changedTouches[0].clientX,e=this.startPoint,i=e-o;i>10?this.nextPage():i<-10&&this.previousPage(),this.move=0}},touchMove:function(t){"H"==this.layoutValue&&(this.move=t.changedTouches[0].clientX-this.startPoint)},nextPage:function(){this.noLeftRightClick||(this.calculatePage(this.pageCurrent)?this.BookList.length>this.BookData.index&&(this.BookData.index++,this.getNewReadContent()):(this.pageCurrent++,this.calculateTranslateX(),this.pageCurrent+1===this.pageCurrent&&console.log(22222)))},previousPage:function(){this.noLeftRightClick||(this.pageCurrent<=0?this.BookData.index<=1?(this.coverShow=!0,this.coverInfo.translate=0):(this.BookData.index--,this.getNewReadContent()):(this.pageCurrent--,this.calculateTranslateX(),this.pageCurrent))},previousReadClick:function(){this.BookData.index>1&&(this.BookData.index--,this.onToEnd(),this.getNewReadContent())},nexReadClick:function(){this.BookList.length>this.BookData.index&&(this.BookData.index++,this.onToEnd(),this.getNewReadContent())},details:function(t,o){var e=o+1;if("正序"==this.order){var i=this.BookList.length;e=i-o-1}this.BookData.index=e,this.onToEnd(),this.getNewReadContent()},getNewReadContent:function(){if("倒序"==this.order){var o=this.BookList[this.BookData.index-1];this.BookData.news=o.id,this.BookData.name=o.name}else{var e=this.BookList.length-this.BookData.index,a=this.BookList[e-1];this.BookData.news=a.id,this.BookData.name=a.name}this.BookData.page=0,t.setNavigationBarTitle({title:this.BookData.name}),this.GetReadContent(),i.default.UpBookListData(this.BookData)},calculateTranslateX:function(){this.translateX=-(this.domInfo.offsetWidth+this.clearance)*this.pageCurrent},calculatePage:function(t){var o=this.domInfo.offsetWidth*(t+1);return this.domInfo.scrollWidth-o<=this.domInfo.offsetWidth},calculateTotalPage:function(){var t=this;this.$nextTick((function(){t.pageTotal=parseInt(t.domInfo.scrollWidth/t.domInfo.offsetWidth)}))},onToEnd:function(){this.optShow=!1,this.optBotShow=!1,this.asideShow=!1,this.optSetShow=!1},onCenter:function(){this.optShow=!0},asideClick:function(){this.optBotShow=!1,this.optSetShow=!1,1==this.asideShow?this.asideShow=!1:this.asideShow=!0},optBotClick:function(){this.asideShow=!1,this.optSetShow=!1,1==this.optBotShow?this.optBotShow=!1:this.optBotShow=!0},optSetClick:function(){this.optBotShow=!1,this.asideShow=!1,1==this.optSetShow?this.optSetShow=!1:this.optSetShow=!0},fontSizeMove:function(){var t=this.fontSizeSlider;if(t>1){var o=t-1;this.fontSizeSlider=o,this.SetFontSize(o)}},fontSizeAdd:function(){var t=this.fontSizeSlider;if(t<8){var o=t+1;this.fontSizeSlider=o,this.SetFontSize(o)}},fontSizeChange:function(t){var o=t.detail.value;this.SetFontSize(o)},SetFontSize:function(t){1==t?this.fontSize=.875:2==t?this.fontSize=1:3==t?this.fontSize=1.125:4==t?this.fontSize=1.25:5==t?this.fontSize=1.375:6==t?this.fontSize=1.5:7==t?this.fontSize=1.625:8==t&&(this.fontSize=1.75)},skinCheckbox:function(o,e){for(var i=this.skinData,a=0,n=i.length;a<n;++a)this.skinData[a].checked=!1;this.skinData[o].checked=!0,this.skinValue=e,"default"==e?t.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#c4b395"}):"blue"==e?t.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#cad9e8"}):"green"==e?t.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#d1edd1"}):"light"==e?t.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#e6e6e6"}):"night"==e&&t.setNavigationBarColor({frontColor:"#ffffff",backgroundColor:"#1a1a1a"})},layoutCheckbox:function(t,o){for(var e=this.layoutData,i=0,a=e.length;i<a;++i)this.layoutData[i].checked=!1;this.layoutData[t].checked=!0,this.layoutValue=o},orderClick:function(){var t=this.order;this.order="正序"==t?"倒序":"正序",this.BookList=this.BookList.reverse()}}};o.default=n}).call(this,e("543d")["default"])},ec73:function(t,o,e){"use strict";e.r(o);var i=e("2414"),a=e("4eaa");for(var n in a)"default"!==n&&function(t){e.d(o,t,(function(){return a[t]}))}(n);e("bc10");var s,h=e("f0c5"),r=Object(h["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],s);o["default"]=r.exports}},[["039f","common/runtime","common/vendor"]]]);